import{a as x,b as h,c as R,d as A,e as D,g as f,h as I,j as k,k as G,m as L,n as j}from"./chunk-NDLKB3YK.js";import{Aa as S,Fa as m,Ga as C,Ha as F,Ka as v,O as g,T as b,ba as i,db as _,ea as p,fb as T,ga as y,gb as N,jb as w,kb as E,qa as d,ra as c,va as l,wa as r,xa as n,ya as s}from"./chunk-OEVTQUXT.js";import"./chunk-2VMXMS7J.js";var q=()=>["/login"],M=()=>["/register"];function U(t,o){t&1&&(r(0,"a",5),m(1,"Have an account?"),n()),t&2&&l("routerLink",v(1,q))}function V(t,o){t&1&&(r(0,"a",5),m(1,"Need an account?"),n()),t&2&&l("routerLink",v(1,M))}function H(t,o){t&1&&s(0,"input",10)}var $=(()=>{let o=class o{constructor(u,a,e){this.route=u,this.router=a,this.userService=e,this.authType="",this.title="",this.errors={errors:{}},this.isSubmitting=!1,this.destroyRef=g(b),this.authForm=new D({email:new f("",{validators:[h.required],nonNullable:!0}),password:new f("",{validators:[h.required],nonNullable:!0})})}ngOnInit(){this.authType=this.route.snapshot.url.at(-1).path,this.title=this.authType==="login"?"Sign in":"Sign up",this.authType==="register"&&this.authForm.addControl("username",new f("",{validators:[h.required],nonNullable:!0}))}submitForm(){this.isSubmitting=!0,this.errors={errors:{}},(this.authType==="login"?this.userService.login(this.authForm.value):this.userService.register(this.authForm.value)).pipe(E(this.destroyRef)).subscribe({next:()=>void this.router.navigate(["/"]),error:a=>{this.errors=a,this.isSubmitting=!1}})}};o.\u0275fac=function(a){return new(a||o)(p(_),p(T),p(w))},o.\u0275cmp=y({type:o,selectors:[["app-auth-page"]],decls:20,vars:9,consts:[[1,"auth-page"],[1,"container","page"],[1,"row"],[1,"col-md-6","offset-md-3","col-xs-12"],[1,"text-xs-center"],[3,"routerLink"],[3,"errors"],[3,"ngSubmit","formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","username","placeholder","Username","type","text",1,"form-control","form-control-lg"],["formControlName","email","placeholder","Email","type","text",1,"form-control","form-control-lg"],["formControlName","password","placeholder","Password","type","password",1,"form-control","form-control-lg"],["type","submit",1,"btn","btn-lg","btn-primary","pull-xs-right",3,"disabled"]],template:function(a,e){a&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),m(5),n(),r(6,"p",4),d(7,U,2,2,"a",5),d(8,V,2,2,"a",5),n(),s(9,"app-list-errors",6),r(10,"form",7),S("ngSubmit",function(){return e.submitForm()}),r(11,"fieldset",8)(12,"fieldset",9),d(13,H,1,0,"input",10),n(),r(14,"fieldset",9),s(15,"input",11),n(),r(16,"fieldset",9),s(17,"input",12),n(),r(18,"button",13),m(19),n()()()()()()()),a&2&&(i(5),C(e.title),i(2),c(e.authType==="register"?7:-1),i(),c(e.authType==="login"?8:-1),i(),l("errors",e.errors),i(),l("formGroup",e.authForm),i(),l("disabled",e.isSubmitting),i(2),c(e.authType==="register"?13:-1),i(5),l("disabled",!e.authForm.valid),i(),F(" ",e.title," "))},dependencies:[N,j,L,I,x,R,A,k,G],encapsulation:2});let t=o;return t})();export{$ as default};
