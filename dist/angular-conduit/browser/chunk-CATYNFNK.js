import{a as F,b}from"./chunk-R45EGEFQ.js";import{a as N}from"./chunk-EANCRLRI.js";import{Aa as v,Ba as h,Fa as s,Ga as D,Ha as f,La as C,O as L,Q as x,R as E,T,Va as I,ba as n,ea as w,ga as g,gb as P,kb as k,qa as y,ra as A,sa as _,ta as u,ua as d,va as p,wa as a,xa as l,ya as O,za as S}from"./chunk-OEVTQUXT.js";var $=e=>["/article",e];function G(e,t){if(e&1&&(a(0,"li",5),s(1),l()),e&2){let c=t.$implicit;n(),f(" ",c," ")}}var M=(()=>{let t=class t{toggleFavorite(i){this.article.favorited=i,i?this.article.favoritesCount++:this.article.favoritesCount--}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=g({type:t,selectors:[["app-article-preview"]],inputs:{article:"article"},decls:14,vars:8,consts:[[1,"article-preview"],[3,"article"],[1,"pull-xs-right",3,"toggle","article"],[1,"preview-link",3,"routerLink"],[1,"tag-list"],[1,"tag-default","tag-pill","tag-outline"]],template:function(o,r){o&1&&(a(0,"div",0)(1,"app-article-meta",1)(2,"app-favorite-button",2),v("toggle",function(q){return r.toggleFavorite(q)}),s(3),l()(),a(4,"a",3)(5,"h1"),s(6),l(),a(7,"p"),s(8),l(),a(9,"span"),s(10,"Read more..."),l(),a(11,"ul",4),u(12,G,2,1,"li",5,_),l()()()),o&2&&(n(),p("article",r.article),n(),p("article",r.article),n(),f(" ",r.article.favoritesCount," "),n(),p("routerLink",C(6,$,r.article.slug)),n(2),D(r.article.title),n(2),D(r.article.description),n(4),d(r.article.tagList))},dependencies:[F,b,P],encapsulation:2});let e=t;return e})();var m=function(e){return e.NOT_LOADED="NOT_LOADED",e.LOADING="LOADING",e.LOADED="LOADED",e}(m||{});var B=e=>({active:e}),Q=(e,t)=>t.slug;function V(e,t){e&1&&(a(0,"div",0),s(1,"Loading articles..."),l())}function j(e,t){if(e&1&&O(0,"app-article-preview",1),e&2){let c=t.$implicit;p("article",c)}}function U(e,t){e&1&&(a(0,"div",0),s(1,"No articles are here... yet."),l())}function z(e,t){if(e&1){let c=S();a(0,"li",3)(1,"button",4),v("click",function(){let o=x(c).$implicit,r=h(2);return E(r.setPageTo(o))}),s(2),l()()}if(e&2){let c=t.$implicit,i=h(2);p("ngClass",C(2,B,c===i.currentPage)),n(2),f(" ",c," ")}}function H(e,t){if(e&1&&(u(0,j,1,1,"app-article-preview",1,Q,!1,U,2,0,"div",0),a(3,"nav")(4,"ul",2),u(5,z,3,4,"li",3,_),l()()),e&2){let c=h();d(c.results),n(5),d(c.totalPages)}}var ce=(()=>{let t=class t{set config(i){i&&(this.query=i,this.currentPage=1,this.runQuery())}constructor(i){this.articlesService=i,this.results=[],this.currentPage=1,this.totalPages=[],this.loading=m.NOT_LOADED,this.LoadingState=m,this.destroyRef=L(T)}setPageTo(i){this.currentPage=i,this.runQuery()}runQuery(){this.loading=m.LOADING,this.results=[],this.limit&&(this.query.filters.limit=this.limit,this.query.filters.offset=this.limit*(this.currentPage-1)),this.articlesService.query(this.query).pipe(k(this.destroyRef)).subscribe(i=>{this.loading=m.LOADED,this.results=i.articles,this.totalPages=Array.from(new Array(Math.ceil(i.articlesCount/this.limit)),(o,r)=>r+1)})}};t.\u0275fac=function(o){return new(o||t)(w(N))},t.\u0275cmp=g({type:t,selectors:[["app-article-list"]],inputs:{limit:"limit",config:"config"},decls:2,vars:2,consts:[[1,"article-preview"],[3,"article"],[1,"pagination"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click"]],template:function(o,r){o&1&&(y(0,V,2,0,"div",0),y(1,H,7,1)),o&2&&(A(r.loading===r.LoadingState.LOADING?0:-1),n(),A(r.loading===r.LoadingState.LOADED?1:-1))},dependencies:[M,I],styles:[".page-link[_ngcontent-%COMP%]{cursor:pointer}"]});let e=t;return e})();export{ce as a};
